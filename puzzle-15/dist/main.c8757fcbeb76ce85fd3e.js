(()=>{"use strict";const t=document.body,e=document.createElement("div");e.classList.add("wrapper"),t.append(e);const n=document.createElement("div");n.classList.add("menu"),e.append(n);const s=document.createElement("button");s.classList.add("shuffle"),s.classList.add("menu-btn"),s.innerHTML="Shuffle and start",n.append(s);const d=document.createElement("button");d.classList.add("stop"),d.classList.add("menu-btn"),d.innerHTML="Stop",n.append(d);const a=document.createElement("button");a.classList.add("save"),a.classList.add("menu-btn"),a.innerHTML="Save",n.append(a);const c=document.createElement("button");c.classList.add("save"),c.classList.add("menu-btn"),c.innerHTML="Results",n.append(c);const i=document.createElement("button");i.classList.add("mute"),i.classList.add("menu-btn"),n.append(i);const o=document.createElement("div");o.classList.add("statistic"),e.append(o);const l=document.createElement("div");l.classList.add("moves"),l.innerHTML="Moves: ",o.append(l);const r=document.createElement("span");r.classList.add("moves-num"),r.innerHTML="0",l.append(r);const m=document.createElement("div");m.classList.add("time"),m.innerHTML="Time: ",o.append(m);const u=document.createElement("span");u.classList.add("time-num"),u.innerHTML="00:00:00",m.append(u);const b=document.createElement("div");b.classList.add("game"),e.append(b);const p=document.createElement("button");p.classList.add("game-btn"),p.innerHTML="1",b.append(p);const L=document.createElement("button");L.classList.add("game-btn"),L.innerHTML="2",b.append(L);const E=document.createElement("button");E.classList.add("game-btn"),E.innerHTML="3",b.append(E);const h=document.createElement("button");h.classList.add("game-btn"),h.innerHTML="4",b.append(h);const g=document.createElement("button");g.classList.add("game-btn"),g.innerHTML="5",b.append(g);const y=document.createElement("button");y.classList.add("game-btn"),y.innerHTML="6",b.append(y);const M=document.createElement("button");M.classList.add("game-btn"),M.innerHTML="7",b.append(M);const T=document.createElement("button");T.classList.add("game-btn"),T.innerHTML="8",b.append(T);const H=document.createElement("button");H.classList.add("game-btn"),H.innerHTML="9",b.append(H);const x=document.createElement("button");x.classList.add("game-btn"),x.innerHTML="10",b.append(x);const A=document.createElement("button");A.classList.add("game-btn"),A.innerHTML="11",b.append(A);const f=document.createElement("button");f.classList.add("game-btn"),f.innerHTML="12",b.append(f);const v=document.createElement("button");v.classList.add("game-btn"),v.innerHTML="13",b.append(v);const k=document.createElement("button");k.classList.add("game-btn"),k.innerHTML="14",b.append(k);const w=document.createElement("button");w.classList.add("game-btn"),w.innerHTML="15",b.append(w);const N=document.createElement("button");N.classList.add("game-btn"),N.innerHTML="16",b.append(N);const $=document.createElement("button");$.classList.add("game-btn"),$.innerHTML="17",$.setAttribute("hidden",""),b.append($);const S=document.createElement("button");S.classList.add("game-btn"),S.innerHTML="18",S.setAttribute("hidden",""),b.append(S);const D=document.createElement("button");D.classList.add("game-btn"),D.innerHTML="19",D.setAttribute("hidden",""),b.append(D);const q=document.createElement("button");q.classList.add("game-btn"),q.innerHTML="20",q.setAttribute("hidden",""),b.append(q);const z=document.createElement("button");z.classList.add("game-btn"),z.innerHTML="21",z.setAttribute("hidden",""),b.append(z);const I=document.createElement("button");I.classList.add("game-btn"),I.innerHTML="22",I.setAttribute("hidden",""),b.append(I);const C=document.createElement("button");C.classList.add("game-btn"),C.innerHTML="23",C.setAttribute("hidden",""),b.append(C);const R=document.createElement("button");R.classList.add("game-btn"),R.innerHTML="24",R.setAttribute("hidden",""),b.append(R);const Y=document.createElement("button");Y.classList.add("game-btn"),Y.innerHTML="25",Y.setAttribute("hidden",""),b.append(Y);const j=document.createElement("button");j.classList.add("game-btn"),j.innerHTML="26",j.setAttribute("hidden",""),b.append(j);const B=document.createElement("button");B.classList.add("game-btn"),B.innerHTML="27",B.setAttribute("hidden",""),b.append(B);const F=document.createElement("button");F.classList.add("game-btn"),F.innerHTML="28",F.setAttribute("hidden",""),b.append(F);const G=document.createElement("button");G.classList.add("game-btn"),G.innerHTML="29",G.setAttribute("hidden",""),b.append(G);const J=document.createElement("button");J.classList.add("game-btn"),J.innerHTML="30",J.setAttribute("hidden",""),b.append(J);const K=document.createElement("button");K.classList.add("game-btn"),K.innerHTML="31",K.setAttribute("hidden",""),b.append(K);const O=document.createElement("button");O.classList.add("game-btn"),O.innerHTML="32",O.setAttribute("hidden",""),b.append(O);const P=document.createElement("button");P.classList.add("game-btn"),P.innerHTML="33",P.setAttribute("hidden",""),b.append(P);const Q=document.createElement("button");Q.classList.add("game-btn"),Q.innerHTML="34",Q.setAttribute("hidden",""),b.append(Q);const U=document.createElement("button");U.classList.add("game-btn"),U.innerHTML="35",U.setAttribute("hidden",""),b.append(U);const V=document.createElement("button");V.classList.add("game-btn"),V.innerHTML="36",V.setAttribute("hidden",""),b.append(V);const W=document.createElement("button");W.classList.add("game-btn"),W.innerHTML="37",W.setAttribute("hidden",""),b.append(W);const X=document.createElement("button");X.classList.add("game-btn"),X.innerHTML="38",X.setAttribute("hidden",""),b.append(X);const Z=document.createElement("button");Z.classList.add("game-btn"),Z.innerHTML="39",Z.setAttribute("hidden",""),b.append(Z);const _=document.createElement("button");_.classList.add("game-btn"),_.innerHTML="40",_.setAttribute("hidden",""),b.append(_);const tt=document.createElement("button");tt.classList.add("game-btn"),tt.innerHTML="41",tt.setAttribute("hidden",""),b.append(tt);const et=document.createElement("button");et.classList.add("game-btn"),et.innerHTML="42",et.setAttribute("hidden",""),b.append(et);const nt=document.createElement("button");nt.classList.add("game-btn"),nt.innerHTML="43",nt.setAttribute("hidden",""),b.append(nt);const st=document.createElement("button");st.classList.add("game-btn"),st.innerHTML="44",st.setAttribute("hidden",""),b.append(st);const dt=document.createElement("button");dt.classList.add("game-btn"),dt.innerHTML="45",dt.setAttribute("hidden",""),b.append(dt);const at=document.createElement("button");at.classList.add("game-btn"),at.innerHTML="46",at.setAttribute("hidden",""),b.append(at);const ct=document.createElement("button");ct.classList.add("game-btn"),ct.innerHTML="47",ct.setAttribute("hidden",""),b.append(ct);const it=document.createElement("button");it.classList.add("game-btn"),it.innerHTML="48",it.setAttribute("hidden",""),b.append(it);const ot=document.createElement("button");ot.classList.add("game-btn"),ot.innerHTML="49",ot.setAttribute("hidden",""),b.append(ot);const lt=document.createElement("button");lt.classList.add("game-btn"),lt.innerHTML="50",lt.setAttribute("hidden",""),b.append(lt);const rt=document.createElement("button");rt.classList.add("game-btn"),rt.innerHTML="51",rt.setAttribute("hidden",""),b.append(rt);const mt=document.createElement("button");mt.classList.add("game-btn"),mt.innerHTML="52",mt.setAttribute("hidden",""),b.append(mt);const ut=document.createElement("button");ut.classList.add("game-btn"),ut.innerHTML="53",ut.setAttribute("hidden",""),b.append(ut);const bt=document.createElement("button");bt.classList.add("game-btn"),bt.innerHTML="54",bt.setAttribute("hidden",""),b.append(bt);const pt=document.createElement("button");pt.classList.add("game-btn"),pt.innerHTML="55",pt.setAttribute("hidden",""),b.append(pt);const Lt=document.createElement("button");Lt.classList.add("game-btn"),Lt.innerHTML="56",Lt.setAttribute("hidden",""),b.append(Lt);const Et=document.createElement("button");Et.classList.add("game-btn"),Et.innerHTML="57",Et.setAttribute("hidden",""),b.append(Et);const ht=document.createElement("button");ht.classList.add("game-btn"),ht.innerHTML="58",ht.setAttribute("hidden",""),b.append(ht);const gt=document.createElement("button");gt.classList.add("game-btn"),gt.innerHTML="59",gt.setAttribute("hidden",""),b.append(gt);const yt=document.createElement("button");yt.classList.add("game-btn"),yt.innerHTML="60",yt.setAttribute("hidden",""),b.append(yt);const Mt=document.createElement("button");Mt.classList.add("game-btn"),Mt.innerHTML="61",Mt.setAttribute("hidden",""),b.append(Mt);const Tt=document.createElement("button");Tt.classList.add("game-btn"),Tt.innerHTML="62",Tt.setAttribute("hidden",""),b.append(Tt);const Ht=document.createElement("button");Ht.classList.add("game-btn"),Ht.innerHTML="63",Ht.setAttribute("hidden",""),b.append(Ht);const xt=document.createElement("button");xt.classList.add("game-btn"),xt.innerHTML="64",xt.setAttribute("hidden",""),b.append(xt);const At=document.createElement("div");At.classList.add("game-win"),b.append(At);const ft=document.createElement("div");ft.classList.add("game-win-message"),At.append(ft);const vt=document.createElement("div");vt.classList.add("level"),e.append(vt);const kt=document.createElement("button");kt.classList.add("level-btn"),kt.innerHTML="3x3",vt.append(kt);const wt=document.createElement("button");wt.classList.add("level-btn"),wt.classList.add("active"),wt.innerHTML="4x4",vt.append(wt);const Nt=document.createElement("button");Nt.classList.add("level-btn"),Nt.innerHTML="5x5",vt.append(Nt);const $t=document.createElement("button");$t.classList.add("level-btn"),$t.innerHTML="6x6",vt.append($t);const St=document.createElement("button");St.classList.add("level-btn"),St.innerHTML="7x7",vt.append(St);const Dt=document.createElement("button");Dt.classList.add("level-btn"),Dt.innerHTML="8x8",vt.append(Dt);const qt=new Audio;qt.src="../assets/audio/end.mp3";const zt=new Audio;zt.src="../assets/audio/click.mp3";const It=new Audio;It.src="../assets/audio/stop.mp3";const Ct=new Audio("../assets/audio/shuffle.mp3");i.addEventListener("click",(t=>{i.classList.toggle("sound-off"),i.classList.contains("sound-off")?(zt.muted=!0,qt.muted=!0,It.muted=!0,Ct.muted=!0):(zt.muted=!1,qt.muted=!1,It.muted=!1,Ct.muted=!1)}));const Rt=Array.from(document.querySelectorAll(".level-btn"));let Yt,jt=0,Bt=0,Ft=null,Gt=null;function Jt(t){const e=new Date(1970,0,1);return e.setSeconds(t),e.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")}function Kt(){jt=-1,clearInterval(Yt),Bt=0,r.innerHTML=`${Bt}`}function Ot(){return r.innerHTML=`${Bt+=1}`}function Pt(){Ft=Jt(jt),Gt=Bt,ft.innerHTML=`Hooray! You solved the puzzle in ${Jt(jt)} and ${Bt} moves!`,At.style.display="flex"}window.addEventListener("load",(()=>{Yt=void setInterval((()=>{u.innerHTML=`${Jt(++jt)}`}),1e3)})),s.addEventListener("click",(()=>{Kt(),ft.innerHTML="",At.style.display="none"})),d.addEventListener("click",(()=>{Kt()})),Rt.forEach((t=>{t.addEventListener("click",(()=>{Kt()}))}));const Qt=Array.from(b.querySelectorAll(".game-btn"));function Ut(t,e){const n=[];let s=0,d=0;for(let t=0;t<e;t++)n.push([]);for(let a=0;a<t.length;a++)d>=e&&(s++,d=0),n[s][d]=t[a],d++;return n}!function(){let t=1;Qt.forEach((e=>{e.setAttribute("data-matrix-num",`${t}`),t++}))}();let Vt=Qt.map((t=>Number(t.dataset.matrixNum))),Wt=Vt.slice(0,16);Qt[15].style.display="none";let Xt=Ut(Wt,4);console.log(Xt);let Zt=Ut(Vt.slice(0,9),3);console.log(Zt);let _t=Ut(Vt.slice(0,25),5);console.log(_t);let te=Ut(Vt.slice(0,36),6);console.log(te);let ee=Ut(Vt.slice(0,49),7);console.log(ee);let ne=Ut(Vt.slice(0,64),8);function se(t,e){for(let n=0;n<t.length;n++)for(let s=0;s<t[n].length;s++){const d=t[n][s];de(e,Qt[d-1],s,n)}}function de(t=100,e,n,s){e.style.transform=`translate3D(${n*t}%, ${s*t}%, 0)`}console.log(ne),se(Xt,100);let ae="4x4";const ce=Qt[8],ie=Qt[15],oe=Qt[24],le=Qt[35],re=Qt[48],me=Qt[63];function ue(t){const e=t.flat();return e.map((t=>({item:t,sort:Math.random()}))).sort(((t,e)=>t.sort-e.sort)).map((({item:t})=>t))}vt.addEventListener("click",(t=>{const e=t.target.closest(".level-btn");Rt.forEach((t=>{t.classList.remove("active")})),e.classList.add("active"),ae=e.innerHTML})),kt.addEventListener("click",(t=>{Qt.forEach((t=>{+t.dataset.matrixNum>9&&t.setAttribute("hidden",""),t.style.width="33.333%",t.style.height="33.333%"})),ce.style.display="none";const e=ue(Zt);Zt=Ut(e,3),se(Zt,100),Ct.play()})),wt.addEventListener("click",(t=>{Qt.forEach((t=>{+t.dataset.matrixNum<16&&t.removeAttribute("hidden"),+t.dataset.matrixNum>16&&t.setAttribute("hidden",""),t.style.width="25%",t.style.height="25%"})),ce.style.display="block",ie.style.display="none";const e=ue(Xt);Xt=Ut(e,4),se(Xt,100),Ct.play()})),Nt.addEventListener("click",(t=>{Qt.forEach((t=>{+t.dataset.matrixNum<=25&&t.removeAttribute("hidden"),+t.dataset.matrixNum>25&&t.setAttribute("hidden",""),t.style.width="20%",t.style.height="20%"})),ce.style.display="block",ie.style.display="block",oe.style.display="none";const e=ue(_t);_t=Ut(e,5),se(_t,100),Ct.play()})),$t.addEventListener("click",(t=>{Qt.forEach((t=>{+t.dataset.matrixNum<=36&&t.removeAttribute("hidden"),+t.dataset.matrixNum>36&&t.setAttribute("hidden",""),t.style.width="16.666%",t.style.height="16.666%"})),ce.style.display="block",ie.style.display="block",oe.style.display="block",le.style.display="none";const e=ue(te);te=Ut(e,6),se(te,100),Ct.play()})),St.addEventListener("click",(t=>{Qt.forEach((t=>{+t.dataset.matrixNum<=49&&t.removeAttribute("hidden"),+t.dataset.matrixNum>49&&t.setAttribute("hidden",""),t.style.width="14.285%",t.style.height="14.285%"})),ce.style.display="block",ie.style.display="block",oe.style.display="block",le.style.display="block",re.style.display="none";const e=ue(ee);ee=Ut(e,7),se(ee,100),Ct.play()})),Dt.addEventListener("click",(t=>{Qt.forEach((t=>{+t.dataset.matrixNum<=64&&t.removeAttribute("hidden"),+t.dataset.matrixNum>64&&t.setAttribute("hidden",""),t.style.width="12.5%",t.style.height="12.5%"})),ce.style.display="block",ie.style.display="block",oe.style.display="block",le.style.display="block",re.style.display="block",me.style.display="none";const e=ue(ne);ne=Ut(e,8),se(ne,100),Ct.play()})),s.addEventListener("click",(t=>{if("3x3"===ae){const t=ue(Zt);Zt=Ut(t,3),se(Zt,100)}if("4x4"===ae){const t=ue(Xt);Xt=Ut(t,4),se(Xt,100)}if("5x5"===ae){const t=ue(_t);_t=Ut(t,5),se(_t,100)}if("6x6"===ae){const t=ue(te);te=Ut(t,6),se(te,100)}if("7x7"===ae){const t=ue(ee);ee=Ut(t,7),se(ee,100)}if("8x8"===ae){const t=ue(ne);ne=Ut(t,8),se(ne,100)}Ct.play()})),window.addEventListener("load",(t=>{const e=ue(Xt);Xt=Ut(e,4),se(Xt,100)}));function be(t,e){for(let n=0;n<e.length;n++)for(let s=0;s<e[n].length;s++)if(e[n][s]===t)return{x:s,y:n};return null}function pe(t,e){const n=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);return!(1!==n&&1!==s||t.x!==e.x&&t.y!==e.y)}function Le(t,e){const n=new Array(e*e).fill(0).map(((t,e)=>e+1));const s=t.flat();for(let t=0;t<n.length;t++)if(s[t]!==n[t])return!1;return!0}function Ee(t,e,n){const s=n[t.y][t.x];n[t.y][t.x]=n[e.y][e.x],n[e.y][e.x]=s,("3x3"===ae&&Le(Zt,3)||"4x4"===ae&&Le(Xt,4)||"5x5"===ae&&Le(_t,5)||"6x6"===ae&&Le(te,6)||"7x7"===ae&&Le(ee,7)||"8x8"===ae&&Le(ne,8))&&(Pt(),qt.play())}function he(t,e,n){const s=be(Number(t.dataset.matrixNum),e),d=be(n,e);pe(s,d)&&(Ee(d,s,e),se(e),Ot(),zt.play())}function ge(t,e,n,s){const d=be(t,e),a={x:d.x,y:d.y};"up"===s&&(a.y+=1),"down"===s&&(a.y-=1),"left"===s&&(a.x+=1),"right"===s&&(a.x-=1),a.y>=n||a.x>=n||a.x<0||a.y<0||(Ee(d,a,e),se(e),Ot(),zt.play())}b.addEventListener("click",(t=>{const e=t.target.closest(".game-btn");e&&("3x3"===ae?he(e,Zt,9):"4x4"===ae?he(e,Xt,16):"5x5"===ae?he(e,_t,25):"6x6"===ae?he(e,te,36):"7x7"===ae?he(e,ee,49):"8x8"===ae&&he(e,ne,64))})),window.addEventListener("keydown",(t=>{if(!t.key.includes("Arrow"))return;const e=Zt.length,n=Xt.length,s=_t.length,d=te.length,a=ee.length,c=ne.length,i=t.key.split("Arrow")[1].toLowerCase();"3x3"===ae?ge(9,Zt,e,i):"4x4"===ae?ge(16,Xt,n,i):"5x5"===ae?ge(25,_t,s,i):"6x6"===ae?ge(36,te,d,i):"7x7"===ae?ge(49,ee,a,i):"8x8"===ae&&ge(64,ne,c,i)}));let ye=!1;function Me(t,e,n){const s=be(Number(t.dataset.matrixNum),e),d=be(n,e);pe(s,d)&&(Ee(d,s,e),se(e),ye=!0),ye&&(Ot(),zt.play()),ye=!1}Qt.forEach((t=>{t.setAttribute("draggable","true")})),b.addEventListener("dragstart",(t=>{t.preventDefault();const e=t.target.closest(".game-btn");e&&("3x3"===ae?Me(e,Zt,9):"4x4"===ae?Me(e,Xt,16):"5x5"===ae?Me(e,_t,25):"6x6"===ae?Me(e,te,36):"7x7"===ae?Me(e,ee,49):"8x8"===ae&&Me(e,ne,64))})),d.addEventListener("click",(()=>{if("3x3"===ae){const t=ue(Zt);Zt=Ut(t,3),se(Zt,100)}if("4x4"===ae){const t=ue(Xt);Xt=Ut(t,4),se(Xt,100)}if("5x5"===ae){const t=ue(_t);_t=Ut(t,5),se(_t,100)}if("6x6"===ae){const t=ue(te);te=Ut(t,6),se(te,100)}if("7x7"===ae){const t=ue(ee);ee=Ut(t,7),se(ee,100)}if("8x8"===ae){const t=ue(ne);ne=Ut(t,8),se(ne,100)}b.style.opacity="0.5",setTimeout((()=>{b.style.opacity="1"}),500),It.play()}))})();